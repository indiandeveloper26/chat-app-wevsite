{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///D:/live-app/chat-app-with-backend/chat-app-web/app/singupp/page.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function SignupPage() {\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n    const [errors, setErrors] = useState({});\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const router = useRouter();\r\n\r\n    // ✅ Validation\r\n    const validate = () => {\r\n        const newErrors = {};\r\n        if (!username.trim()) newErrors.username = \"Username is required\";\r\n        if (!password) newErrors.password = \"Password is required\";\r\n        else if (password.length < 6) newErrors.password = \"Min 6 chars\";\r\n        if (!confirmPassword) newErrors.confirmPassword = \"Confirm Password is required\";\r\n        else if (password !== confirmPassword)\r\n            newErrors.confirmPassword = \"Passwords do not match\";\r\n\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n\r\n    // ✅ Signup handler\r\n    const handleSignup = async () => {\r\n        if (!validate()) return;\r\n\r\n        setLoading(true);\r\n        const lowerUsername = username.toLowerCase();\r\n\r\n        try {\r\n            const response = await axios.post(\"http://localhost:5000/signup\", {\r\n                username: lowerUsername,\r\n                password,\r\n            });\r\n\r\n            const apiRes = response.data;\r\n\r\n            // ✅ Save to localStorage (AsyncStorage ki jagah)\r\n            if (apiRes.token) localStorage.setItem(\"token\", apiRes.token);\r\n            if (apiRes.user?.username) localStorage.setItem(\"username\", apiRes.user.username);\r\n            if (apiRes.user?.premiumExpiry)\r\n                localStorage.setItem(\"premiumExpiry\", apiRes.user.premiumExpiry);\r\n            if (apiRes.user?.isPremium !== undefined)\r\n                localStorage.setItem(\"isPremium\", apiRes.user.isPremium.toString());\r\n\r\n            alert(\"✅ Signup successful! You got 2 days premium!\");\r\n            router.push(\"/chatlist\"); // Next.js page navigation\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert(\"❌ Signup failed, please try again!\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center min-h-screen bg-black\">\r\n            <div className=\"w-full max-w-md bg-gray-900 p-8 rounded-2xl shadow-lg\">\r\n                <h1 className=\"text-3xl font-bold text-white text-center mb-6\">\r\n                    Create Account\r\n                </h1>\r\n\r\n                {/* Username */}\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Username\"\r\n                    className=\"w-full p-3 mb-2 rounded bg-gray-800 text-white focus:outline-none\"\r\n                    value={username}\r\n                    onChange={(e) => {\r\n                        setUsername(e.target.value);\r\n                        if (errors.username) setErrors((prev) => ({ ...prev, username: null }));\r\n                    }}\r\n                />\r\n                {errors.username && <p className=\"text-red-500 text-sm\">{errors.username}</p>}\r\n\r\n                {/* Password */}\r\n                <input\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    className=\"w-full p-3 mb-2 rounded bg-gray-800 text-white focus:outline-none\"\r\n                    value={password}\r\n                    onChange={(e) => {\r\n                        setPassword(e.target.value);\r\n                        if (errors.password) setErrors((prev) => ({ ...prev, password: null }));\r\n                    }}\r\n                />\r\n                {errors.password && <p className=\"text-red-500 text-sm\">{errors.password}</p>}\r\n\r\n                {/* Confirm Password */}\r\n                <input\r\n                    type=\"password\"\r\n                    placeholder=\"Confirm Password\"\r\n                    className=\"w-full p-3 mb-2 rounded bg-gray-800 text-white focus:outline-none\"\r\n                    value={confirmPassword}\r\n                    onChange={(e) => {\r\n                        setConfirmPassword(e.target.value);\r\n                        if (errors.confirmPassword)\r\n                            setErrors((prev) => ({ ...prev, confirmPassword: null }));\r\n                    }}\r\n                />\r\n                {errors.confirmPassword && (\r\n                    <p className=\"text-red-500 text-sm\">{errors.confirmPassword}</p>\r\n                )}\r\n\r\n                {/* Submit button */}\r\n                <button\r\n                    onClick={handleSignup}\r\n                    disabled={loading}\r\n                    className=\"w-full bg-white text-black py-3 rounded-lg font-bold mt-4 hover:bg-gray-300 disabled:opacity-60\"\r\n                >\r\n                    {loading ? \"Signing up...\" : \"Sign Up\"}\r\n                </button>\r\n\r\n                {/* Login redirect */}\r\n                <button\r\n                    onClick={() => router.push(\"/login\")}\r\n                    disabled={loading}\r\n                    className=\"w-full bg-gray-700 text-white py-3 rounded-lg font-bold mt-3 hover:bg-gray-600\"\r\n                >\r\n                    Login\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}